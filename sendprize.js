// sendHello.js
require("dotenv").config();
const TelegramBot = require("node-telegram-bot-api");

const bot = new TelegramBot(process.env.TELEGRAM_TOKEN);

/**
 * ะคัะฝะบัะธั ะดะปั ะพัะฟัะฐะฒะบะธ ัะพะพะฑัะตะฝะธั ะฟะพะปัะทะพะฒะฐัะตะปั ั ัะบะฐะทะฐะฝะธะตะผ ะฟัะธะทะฐ.
 * @param {number} telegramId - Telegram ID ะฟะพะปัะทะพะฒะฐัะตะปั.
 * @param {string} priz - ะัะธะท, ะบะพัะพััะน ะฑัะดะตั ัะบะฐะทะฐะฝ ะฒ ัะพะพะฑัะตะฝะธะธ.
 */
const sendHello = async (telegramId, priz) => {
  try {
    if (priz === "0") {
      console.log(`ะะธัะตะณะพ ะฝะต ะพัะฟัะฐะฒะปะตะฝะพ ะดะปั ะฟะพะปัะทะพะฒะฐัะตะปั ั ID: ${telegramId}, ัะฐะบ ะบะฐะบ ะฟัะธะท: ${priz}`);
      return;
    }

    // ะะฐะดะตัะถะบะฐ ะฝะฐ 5 ัะตะบัะฝะด ะฟะตัะตะด ะพัะฟัะฐะฒะบะพะน ัะพะพะฑัะตะฝะธั
    setTimeout(async () => {
      let message;

      switch (priz) {
        case "5000":
          message = `๐ ะะพะทะดัะฐะฒะปัะตะผ! ๐\n\n๐ฐ ะั ะฒัะธะณัะฐะปะธ ะฒะพะทะผะพะถะฝะพััั ะฟะพะปััะธัั 5000โฝ! ๐ฐ\n\n<a href=\"https://onesecgo.ru/stream/5000_wbprize\">โจ ะะพะปััะธัั ะฟัะธะท โจ</a>`;
          break;
        case "iphone":
          message = `๐ ะะพะทะดัะฐะฒะปัะตะผ! ๐\n\n๐ฑ ะั ะฒัะธะณัะฐะปะธ ะฒะพะทะผะพะถะฝะพััั ะฟะพะปััะธัั iPhone 16 PRO! ๐ฑ\n\n<a href=\"https://onesecgo.ru/stream/iphone_wbprize\">โจ ะะพะปััะธัั ะฟัะธะท โจ</a>`;
          break;
        case "500":
          message = `๐ ะะพะทะดัะฐะฒะปัะตะผ! ๐\n\n๐ณ ะั ะฒัะธะณัะฐะปะธ ะบัะฟะพะฝ ะฝะฐ 500โฝ ะดะปั ะฟะพะฟะพะปะฝะตะฝะธั ะฒ Wildberries! ๐ณ\n\n๐ ะะดะต ะฝะฐะนัะธ ะบัะฟะพะฝ?\nะะฝ ัะถะต ะถะดะตั ะฒะฐั ะฒะพ ะฒะบะปะฐะดะบะต ั ะบัะฟะพะฝะฐะผะธ.\n\n๐ ะะฐะบ ะฟะพะปััะธัั ะฟัะพะผะพะบะพะด?\nะัะฟัะฐะฒััะต ะบัะฟะพะฝ ะฝะฐัะตะผั ะผะตะฝะตะดะถะตัั ะธ ะฟะพะปััะธัะต ัะฒะพะน ัะฝะธะบะฐะปัะฝัะน ะฟัะพะผะพะบะพะด!\n\n๐ ะะฐะฑะธัะฐะนัะต ัะฒะพะน ะฟะพะดะฐัะพะบ ะฟััะผะพ ัะตะนัะฐั! ๐`;
          break;
        default:
          console.log(`ะะตะธะทะฒะตััะฝัะน ะฟัะธะท: ${priz}`);
          return;
      }

      await bot.sendMessage(telegramId, message, { parse_mode: "HTML" });
      console.log(`ะกะพะพะฑัะตะฝะธะต ััะฟะตัะฝะพ ะพัะฟัะฐะฒะปะตะฝะพ ะฟะพะปัะทะพะฒะฐัะตะปั ั ID: ${telegramId}, ะฟัะธะท: ${priz}`);
    }, 5000);
  } catch (error) {
    console.error(`ะัะธะฑะบะฐ ะฟัะธ ะพัะฟัะฐะฒะบะต ัะพะพะฑัะตะฝะธั ะฟะพะปัะทะพะฒะฐัะตะปั ั ID: ${telegramId}`, error);
  }
};

module.exports = { sendHello };